{
    "collab_server" : "",
    "contents" : "#Loading in KI 2017 fish survey data and cleaning it for fish hydrophone study\n\nrm(list=ls())\n#set wd\nsetwd(\"/Users/Sean Dimoff/Documents/github/fish_sounds2017\")\n#load in required packages\nrequire(ggplot2)\nrequire(plyr)\nlibrary(dplyr)\nrequire(stringr)\n####Fish Data####\n#load in raw data\nfish.all<-read.csv(\"data/KI_UVC_2017.csv\", header = TRUE)\n#restricting for sites with hydrophone\nfsites.to.keep <- c(5,35,8,40,32)\nhfish <- fish.all[fish.all$Site%in%fsites.to.keep,]\nhfish <- droplevels(hfish)\n#Cleaning data of all non-usable data\nhfish <- hfish[!hfish$Note==\"TRAINING NOT FOR USE\",]  #Deleting training data\nhfish <- hfish[!hfish$Note==\"Training Dive\",]   # Deleting training data\nhfish <- hfish[!hfish$Note==\"Training Dive - did not finish\",] #deleting training data\nhfish <- droplevels(hfish)\n#subsetting for only the types of data that we need\nfish.h <- subset(hfish, select = c(\"KI.Date\",\"Site\",\"Transect\",\"Species\",\"Size..cm.\",\"Number\",\"Sexual.Phase..TP..IP..juv.\",\"CoarseFG\",\"FineFG\", \"Family\", \"Time\"))\n#creating new column to seperate 2 surveys done at sites 5 and 8\nfish.h$date.site = paste(fish.h$Site, fish.h$KI.Date, sep=\"_\")\n#creating sites 5a, 5b and 8a, 8b to seperate data from two surveys done at each site\nnew.fish<- c('32', '35', '40', '5a', '5b', '8a', '8b')\nnew.fish<-as.data.frame(new.fish)\nnew.fish$date<-levels(as.factor(fish.h$date.site))\n#adding new column to original data set with seperate designations for each survey on sites 5 and 8\nfish.h$all.sites<-new.fish$new.fish[match(fish.h$date.site, new.fish$date)]\n\n#Creating clean data CSV\nwrite.csv(fish.h,file=\"data/cleanfishdata4sound.csv\", row.names=FALSE)\n\n\n####Benthic Data####\n#Loading in raw data set\nb.dat.tot <- read.csv(file=\"data/BenthicData_Complete.noblanks.csv\", header=TRUE, stringsAsFactors=FALSE)\n\n#Removing all but my 5 sites\nbsites.to.keep <- c(\"site5\",\"site35\",\"site8\",\"site40\",\"site32\")\nb.dat.1 <- b.dat.tot[b.dat.tot$Site%in%bsites.to.keep,]\nb.dat.1 <- droplevels(b.dat.1)\ncolnames(b.dat.1)\n#Removing all but 2017 KI data\nbyears.to.keep <- c(\"KI2017\")\nb.dat <- b.dat.1[b.dat.1$Name%in%byears.to.keep,]\nb.dat <- droplevels(b.dat)\n\n\n#subsetting for only the columns needed ****THIS NEEDS REVISION****\ndat.b <- subset(b.dat, select = c(\"Name\",\"Site\",\"Quadrat\", \"CCA\", \"Sand\", \"Sediment\", \"Rubble\", \"SCRO\", \"AVRA\", \"Caul\", \"DICTY\", \"Dict\", \"Hali\", \"Lobph\", \"Macro\", \"Pad\", \"Peysson\", \"Turf\", \"TURFH\", \"Acrop\", \"AcDig\", \"AcCor\", \"AcroTab\", \"Astreo\", \"Cirr\", \"COSC\", \"ECHIN\", \"Favia\", \"FaviaM\", \"FaviaS\", \"FaviaSt\", \"Fav\", \"FavHal\", \"FavPent\", \"Fung\", \"Gardin\", \"Herpo\", \"HYDNO\", \"Lepta\", \"Lepto\", \"Lobo\", \"Monta\", \"Monti\", \"Paly\", \"Pavon\", \"PaveDUER\", \"PVAR\", \"Plat\", \"Pocill\", \"PEYDO\", \"PMEAN\", \"Porit\", \"Psam\", \"Sando\", \"Tuba\", \"TURB\"))\n\n\n#writing csv with clean benthic data\nwrite.csv(dat.b,file=\"data/cleanbenthicdata4sound.csv\", row.names=FALSE)\n",
    "created" : 1544738312989.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "81765697",
    "id" : "69BD91A7",
    "lastKnownWriteTime" : 1520545062,
    "last_content_update" : 1520545062,
    "path" : "~/GitHub/fish_sounds2017/analyses/1_DataClean.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}